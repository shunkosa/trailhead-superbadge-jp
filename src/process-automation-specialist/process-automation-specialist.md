# Process Automation Specialist
[![](https://img.shields.io/badge/-view%20on%20gitbook-blue?logo=markdown)](https://shunkosa.gitbook.io/trailhead-superbadge-jp/process-automation-specialist) [![](https://img.shields.io/badge/-view%20on%20github-black?logo=github)](https://github.com/shunkosa/trailhead-superbadge-jp/blob/master/src/process-automation-specialist/process-automation-specialist.md)
* Trailhead のスーパーバッジ、[Process Automation Specialist](https://trailhead.salesforce.com/content/learn/superbadges/superbadge_process_automation) の日本語訳(**非公式**)です。
* 各カスタマイズ要素のラベル部分には補足として日本語を括弧内に記載している場合がありますが、正解チェックは英語のラベルを元に行われるため、実際のチャレンジには日本語表記を含めず、英語表記のみを使用して行って下さい。また、チャレンジ前にユーザと組織の言語・ロケールを英語に切り替えておくことを推奨します。

---
## このスーパーバッジを取得するためにすること
1. 割り当てルールを使用してリードの所有権を自動化する
2. 数式項目と入力規則を使用してデータの整合性を確保する
3. 標準オブジェクトとの主従関係でカスタムオブジェクトを作成する
4. フェーズ、レコードタイプ、入力規則を使用して商談のセールスプロセスを定義する
5. ビジネスプロセスを自動化してメールを送信し、関連レコードを作成し、商談の承認プロセスを送信する
6. Lightning レコードページに動的な情報を表示するためのフローを作成する
7. レコードを評価および更新するためのプロセスを作成する

## このスーパーバッジでテストする概念
* 入力規則と数式
* セールスプロセス
* プロセスビルダー
* フロー

## 事前準備とメモ
<!-- textlint-disable jtf-style/1.1.3.箇条書き -->
* ペンと紙を準備して、要件を読み進める際にメモを取ってください。
* このスーパーバッジ用に、新しい Trailhead Playground を作成してください。新しい組織には、必要となるすべての正しいデータがあります。(通常の Developer Edition ではなく、必ず Trailhead Playground を作成してください。Trailhead Playground だけにこのスーパーバッジのチャレンジに必要となる正しいデータがあります。)この組織をほかの目的で使用すると、課題について検証する際に問題を引き起こす可能性があります。
* Lightning Experience を利用してください。
* [Process Automationスーパーバッジの未管理パッケージ](https://login.salesforce.com/packaging/installPackage.apexp?p0=04t46000001Zch4)をインストールしてください。(パッケージ ID: 04t46000001Zch4) 管理パッケージ、未管理パッケージ、アプリケーションを AppExchange からインストールする際に問題が発生した場合は、[この記事](https://force.desk.com/customer/en/portal/articles/2710899-installing-a-package-or-app-to-complete-a-trailhead-challenge?b_id=13478)に示す手順に従ってください。
* Trailhead Playground 組織では 1 人のユーザしか新規作成できませんが、このスーパーバッジのチャレンジを完了するために、多くの権限(プロファイル、ロール、公開グループ、等)を作成することができます。様々な自動化をテストするためのユーザを作成することをお勧めします。Nushi Davoud という名前のユーザをこの目的のために作成してください。Nushi を承認プロセスのためのあなたのマネージャに設定してください。
* このスーパーバッジでは通貨に USD を利用するため、必要に応じて個人設定を更新してください。個人設定から、個人 | 言語とタイムゾーン | で、ロケールを英語(アメリカ合衆国)にし、言語を英語に変更して保存します。
* **どのチャレンジに対しても、ワークフロールールは利用しないでください。**
<!-- textlint-enable jtf-style/1.1.3.箇条書き -->

## ユースケース
RB Robotics は、米国の工場向けに自動組立システムを製作し、設置しています。昨年まで、売上は好調で安定していました。その後、創業者の 8歳の孫娘は、学校のサイエンスプロジェクトのために多色の車輪付きロボットを製作し、創業者は気まぐれにそのデザインを RB Robotics の製品リストに追加しました。誰もが驚いたことに、そのおしゃれな RainbowBot は大ヒットとなりました。おもちゃの店、オンライン小売業者、[Maker Fair](https://makerfaire.com/)は、それを在庫することはできません。RainbowBot の宣伝は、RB Robotics の伝統的な組立システム製品の周りでも新鮮な話題を生み出しました。両部門の売上高は好調に推移しており、需要に追いつくために奮闘しています。

すべてのあなたの友人のように、あなたの家には RainbowBot がいます。RainbowBot はカラフルで愛らしいです。そして役に立ちます！あなたは、RaibowBot に、植物に水を注いでもらい、あなたの犬が寝室の床から"救助する"のが好きな靴下を片付けるようにプログラムしました。RB Robotics の Salesforce 管理者として仕事を譲り受けたとき、あなたは非常にワクワクして、皆にその全てを伝えることが待ち遠しく思いました。

1 日目に出勤するまでは。それから、あなたは Salesforce でのプロセスが自動化されていないことを知りました。手ですべてを行うロボット会社？ああ、皮肉なことです。営業担当者はメールでマネージャに取引の承認を依頼します。マネージャは、適切なチームに割り当てる前に、1 件ずつリードを評価します。非効率的で、エラーを起こしやすいビジネスプロセスのリストが続いています。一方で、営業チームはレコードを管理するのに時間をかけ過ぎており、取引をクローズするのに十分な時間がなく、商機を逃しています。RB Robotics が RainbowBot がもつ機会を十分に生かそうとするならば、同社には自動化され高速化されたプロセスが必要です。幸いにも、あなたはちょうどその仕事を扱うための Salesforce のツールを知っています。

## 標準オブジェクト
取引に関連する全てのデータを保存するため、RB Robotics は以下の標準オブジェクトを利用しています。

* Account (取引先) - RB Robotics から商品を購入する法人(種別が Customer - Direct または Customer - Channel)と、将来購入するかもしれない法人(種別が Prospect)
* Contact (取引先責任者) - RB Robotics の見込みまたは既存の顧客
* Opportunity (商談) - RainbotBot や RB Robotics の組立システムの潜在的な販売活動

## カスタムオブジェクト
このスーパーバッジのために、RB Robotics はカスタムオブジェクトを 1 つ利用しています。

* Robot Setup (ロボットの設定) - RB Robotics のロボットの設定に関する情報。各 Robot Setup レコードは商談と主従関係があります。
  * 項目
    * Name (設定名)
    * Date (設定日)
    * Notes (メモ)
    * Day of the Week (曜日)

## ビジネス要件
最初のステップは、RB Robotics の営業部長と一連のビデオ通話を行うことです。彼女はずっと出張中ですが、セールスプロセスの自動化は彼女の最優先事項です。営業担当者が Salesforce をどのように使用してほしいのかというカ彼女の説明に耳を傾けるたためにダイヤルインし、彼女の要件を満たすように Trailhead Playground 組織を設定してください。もし必要であれば、あなたはここで動画とスライドプレゼンテーションのトランスクリプトをダウンロードすることができます。

(訳注: 以下は動画のトランスクリプトと動画内の一部スライドの翻訳です。Challenge を完了するために必要な情報は全て含めているため、必ずしも動画を見る必要はありません。)

### クイズ
Superbudge 取得および資格についての質問です。Salesforce 認定プログラムの情報と Superbudge の行動規範については、ヘルプ記事をご覧ください。

### Challenge 1: リードの自動化
こんにちは。あなたに働いてもらえるのはとても素晴らしいことです！昨年はとっても凄かったです。RainbowBot のおかげで、大量の新規リードを抱えています。それは素晴らしいことですが、実はリードを管理するのに苦労しています。

主な理由は 2 つあります。: 製品に当てはまらないリードを作りしていること、そして、適切なチームに有望なリードを割り当てる時間を失いつつあることです。

最初の問題は、当てはまらないリードです。私たちは米国に拠点を置く企業であり、現在は米国でのみビジネスを行うことができます。国際的なリードに対しては何もすることができません。しかし、場合によっては国際的なリードが Salesforce に入力されることもあり、そのときはそれらのリードを評価対象外としなければなりません。それら対象外のリードを処理するには時間を要します。リードが米国の州に所在していない場合、リードが作成されないようにする方法はありますか？

私は、Salesforce のリードオブジェクトには Country (国) 項目と State/Province (都道府県 ※ここでは州)項目があることを知っています。すべてのリードに対して、Country 項目には、US、USA、United States、または空白のいずれかを、State/Province 項目には、2 文字の米国の州の略称を入力させることはできますか？以上、これが最初の問題です。

2 番目の問題は、リードを適切なグループにルーティングすることです。Rainbow Sales (RainbowBot のセールスチーム) と Assembly System Sales (組立システムのセールスチーム) の 2 つのセールスチームがあります。昨年、RainbowBot を宣伝するための新しいウェブサイトを作成しました。Rainbow Sales チームは、Web (ウェブサイト) から来るすべてのリードを処理する必要があります。また、Partner Referral (パートナーの紹介) や Purchased List (購入したリスト) から、たくさん他のリードが来ています。これらのリードは、私たちの組立システムの潜在的なバイヤーです。したがって、Assembly System チームがこれらのリードを獲得する必要があります。

現在、私が獲得したリードを 1 件ずつ確認し、適切なチームに割り当てています。Web (ウェブサイト) からのリードが **Rainbow Sales** チームに自動的に割り当てられ、Partner Referral (パートナーの紹介) や Purchased List (購入したリスト) からのリードが **Assembly System Sales** チームに自動的に割り当てられれば嬉しいです。

Salesforce上で、各チームに対するキューがあれば、到来したリードから仕事ができ、それは素晴らしいことです。よろしくお願いします！

```
ビジネス要件に合わせて、入力規則、2 つのキュー、リードの割り当てルールを作成してください。
```

### Challenge 2: 取引先の自動化
リードについてはとても良い仕事でした！あなたは既にセールスチームには大きな影響を与えています。そこで、次は取引先について助けが必要です。

直接私たちに電話連絡してくる新規顧客がおり、営業担当者がその場でそれを評価し、取引先のレコードを新規作成します。しかし、営業担当者は会話しながら入力するため時々入力ミスが発生してしまい、財務部門や物流部門が困っています。私たちは、Shipping State (都道府県(納入先)) と Billing State (都道府県(請求先)) が米国の有効な 2 桁の略称であること、Shipping Country (国(納入先))、Billing Country (国(請求先)) 項目が空白か、US、USA、United States のいずれかでない場合は取引先を保存させないようにしたいです。

他部門を混乱させている他の原因は、顧客の名前が変更されるときにあります。皆が Salesforce上で作成された取引先を参照できることは問題ありませんが、もし取引先の種別が "Customer - Direct" か "Customer - Channel" の場合は、取引先の名前を変更させたくありません。

ああ、それから、営業担当者が見ることができるものついて話すと、彼らが必要とするすべての情報をできるだけ早く見られるようにしてほしいです。例えば、取引先の詳細では、以下の情報を見られるように設定してください。
* Number of deals (商談の数。API 参照名: Number_of_deals__c)
* Number of won deals (成立した商談の数。API 参照名: Number_of_won_deals__c)
* Last won deal date (最後に商談が成立した日付。API 参照名: Last_won_deal_date__c)
* Deal win percent (商談の成立率。API 参照名: Deal_win_percent__c)
* Amount of won deals (成立した商談の金額合計。API 参照名: Amount_of_Won_Deals__c)

また、取引先の詳細に Call for Service という項目を追加したいです。私たちは、ロボットの品質と卓越したサービスに対して素晴らしい評判を頂いています。私はこれを守り続けたいです。もし、その取引先で、最後に商談が成立した日付が 2 年より昔の場合は Call for Service は YES と表示し、そうでない場合は NO と表示してください。これで営業担当者はその取引先に対して、ロボットの調子はどうかと確認するタイミングが分かるでしょう。

```
ビジネス要件に合わせて、取引先に入力規則や数式項目などを作成してください。
```

### Challenge 3: Robot Setupオブジェクトの自動化
取引先に対するあなたの仕事に感謝します！素晴らしかったです。それでは Robot Setup について話しましょう。当社のすべての製品は、当社の技術者チームによって配達および設定される必要があります。良いニュースは、当社の技術者チームも Salesforce を使用していることです。しかし、チームは、いつ注文を届けて設定するかについての情報を探すために、すべての商談をクリックする必要はありません。したがって、クローズして成立した商談ごとに、スケジュール設定に使用できる Robot Setup レコードが作成される必要があります。何らかの理由で商談を削除した場合は、Robot Setup レコードも削除される必要があります。また、設定日を確認する必要があり、技術者または営業担当者が設定についてメモするための場所も必要です。

Monday、Tuesday、Friday など、設定日が何曜日であるかを自動的に計算して表示されるとありがたいです。

当社の技術者チームの責任者は、Robot Setup レコードの名前には自動番号を付けるだけでよいと言っています。取引先の名前などは必要ありません。ROBOT SETUP のように番号の前にそれだと分かる用語を使用すれば、配達と設定のレコードであることに気がつきます。これは設定用のまったく新しいシステムなので、レコードの番号付けをゼロから始めることができます。

```
商談と主従関係となる Robot Setup カスタムオブジェクトを設定してください。ビジネス要件の中で特定された項目も含めてください。
Robot Setup レコードの名前は、自動採番項目で、0 から始めて、ROBOT SETUP-{0000} というフォーマットを用いてください。
Robot Setup オブジェクトの項目名には以下を用いてください。
- Date (設定日, API 参照名: Date__c)
- Notes (メモ, API 参照名: Notes__c)
- Day of the Week (曜日, API 参照名: Day_of_the_Week__c)
```

### Challenge 4: セールスプロセスの作成と商談の評価
こんにちは、Robot Setup について素晴らしい仕事をしてくれてありがとう！それでは、セールスプロセスについて話しましょう。私たちが利用する商談フェーズのほとんどはすでに Salesforce にありますが、私たちが管理する商談フェーズの 1 つは標準的なものではないので、それを追加してもらえるとありがたいです。以下は私たちが使用する商談フェーズです。
- Prospecting
- Qualification
- Proposal/Price Quote
- Negotiation/Review
- Awaiting Approval
- Closed Won
- Closed Lost

私たちはすべての営業担当者が同じセールスプロセスに従うことを望んでいるので、誰もが各商談でこれらのフェーズを見られるべきです。

ああ、そして大きな取引について、金額が $100,000 を超える商談はすべて、クローズする前に承認される必要があります。取引が承認されたことをレコードに表示する方法が必要です。商談に **Approved** (承認済み) のチェックボックスを追加することになるでしょう。もちろん、営業担当者はそのボックスをチェックすることはできません。あなたのようなシステム管理者とセールスマネージャだけがそれをチェックすることができるはずです。ところで、私たちのセールスマネージャーは全員 SalesforceにCustom: Sales Profile のプロファイルが割り当たっています。

```
必要な商談フェーズを含めたセールスプロセスを RB Robotics Sales Process という名前で作成してください。
また、RB Robotics Process RT という名前のレコードタイプを作成してください。
商談のページレイアウトにビジネス要件の中で述べられた項目を追加し、金額の大きな商談に対する入力規則を作成してください。

※承認プロセスは次の Challenge で設定するため、ここではまだ設定不要です。
```

### Challenge 5: 商談の自動化
見込み顧客 (Prospect) や既存の顧客 (Customer) の取引先に対して商談が作成される度に、財務部門はそのことを知りたがっています。財務部門はまた、いつ私たちが取引を成立させたかも知りたがっています。商談を作成し、取引が成立する度に、営業担当者がグループにメールを 1 件ずつ送信するのは大変な作業です。ああ、そして見込み顧客の取引先に対して、取引先の所有者は必ずマーケティング資料である小包を送り出すべきですが、時々彼らは忘れてしまいます。この仕事について面接したときに、あなたがこのような作業を自動化するために使用するプロセスビルダーという Salesforce のツールについて話してくれたことを私は覚えています。1 つのプロセスを他の複数のプロセスで再利用する方法について話したくれとき私は特にそれに感銘を受けました。それは、私たちがここで達成しようとしているタイプの効率化のように思えます。たとえば、私たちはいつも財務部門に対してメールを送信し、取引先の所有者へ ToDo を作成しているので、あなたはきっと何度も使用できるそのためのプロセスを作成してくれるでしょう。

基本的には種別が Prospect または Customer の取引先に対して商談が作成される度に財務部門にメールを送信したいです。そして同時に取引先の所有者に ToDo を作成してください。ただしこれは取引先の種別が Prospect のときだけです。ToDoの詳細は以下の通りです。
<!-- textlint-disable jtf-style/1.1.3.箇条書き -->
* 件名: Send Marketing Materials (マーケティング資料の送付)
* 期日: 本日から 7 日後
* 優先度: High (高)
<!-- textlint-enable jtf-style/1.1.3.箇条書き -->
そして取引が成立したとき、もう 1通メールを財務部門に送信したいです。

はい、それでは商談がセールスプロセスの様々なステージにあるときに何が起こるべきかについて話しましょう。私は今そのことについて考えているので、商談フェーズが Prospecting のときだけ私がこれまでに言及したことを行うのは筋が通っており、他の事はこれから起こります。

商談フェーズが Negotiation/Review のとき、金額が $100,000 以上であれば、自動的に承認依頼を送信したいです。

取引が成立したとき、自動的に Robot Setup レコードを、設定日を商談の完了予定日から 180 日後として作成したいです。そして、財務部門がこのことを知りたがっているので、彼らにメールをもう一度送信することを忘れないでください。

承認プロセスについてです。商談の所有者のマネージャは、$100,000 を超える金額の取引をすべて承認する必要があります。一度承認依頼が送信された後は、誰にもレコードを変更させたくありません。この時点では商談フェーズを Awaiting Approval に設定してください。

もしマネージャが承認したら商談フェーズを Closed/Won に進めてください。
もしマネージャが承認しなかった場合、商談フェーズを Negotiation/Review に戻してください。この時点でのレコードの変更は OKです。

```
ビジネス要求に従って、セールスプロセスにおける適切なタイミングで、財務部門への通知や、取引先の所有者へ ToDo を作成するプロセスを作成してください。
(注: このスーパーバッジのため、初期登録されている "Integration User" を財務部門とみなしてチャレンジを進めてください)
作成したプロセスが Robot Setup レコードの日付を設定し、承認プロセスを送信することを確認します。

承認プロセスのため、Nushi Davoud をあなたのユーザのマネージャに割り当てて、
作成した承認プロセスにより商談所有者のマネージャーにその承認依頼が送信されることを確認してください。
その商談が承認された、または却下された場合、それを商談所有者に知らせてください。

インストールした未管理パッケージに含まれる、
Finance: Account Creation (取引先が作成されました)
SALES: Opportunity Needs Approval (商談は承認を必要としています)
Sales: Opportunity Approval Status (商談の承認ステータス)
のメールテンプレートを適宜プロセスで利用してください。
```

### Challenge 6: 商談のフローを作成する
会社が急成長してから起こったことの 1 つは、新しい営業メンバーを大勢迎え入れたため、顧客と話をするときに必要な製品を簡単に見つけられないことです。RainbowBot を探している営業担当者はすべての組立システム製品が含まれる一覧をスクロールする必要があり、組立システムの製品を見つけようとしている営業担当者はすべての RainbowBot が含まれる一覧を検索する必要があります。また、空を飛ぶ CloudyBot という新しい製品のラインも立ち上げているので、製品の選択肢は増えています。

商談レコードの右側で表示できるようにする、購入したいロボットの種類で商品を絞り込んで商品に関するクイック検索のようなウィジェットが必要です。

私は、顧客と話をしている営業担当者が、商談レコード上で、顧客が望むロボットの種類をチェックするだけで、魔法のように、そのウィジェットのようなもので、チェックされた種類のすべての製品を表示できるようにしたいです。当社の製品がすでに Salesforce の商品レコードに登録されているのは喜ばしいことでしょう。すべての製品の名前には、RainbowBot、CloudyBot、または Assembly System が含まれています。

```
ビジネス要求に従って画面フローを作成し、Lightning ページにフローコンポーネントを配置することでフローを配布します。
フローの名称は Product Quick Search としてください。

注: もし組織の商品オブジェクトに RainbowBot, CloudyBot, Assembly System という名前のレコードがない場合は、
事前準備とメモに記載の通り、このスーパーバッジのために新しい Trailhead Playground を作成しているか確認してください。
```
### Challenge 7: 設定の自動化
はじめに、私は謝らなくてはいけません。私は、当社の技術者チームが週末に稼働しないことを先のミーティングで伝え忘れていました。技術者チームのマネージャはレポートを実行して、設定日が土曜や日曜になっているレコードを発見しました。私たちは、設定日が土曜または日曜で入力された場合、代わりに月曜を設定する必要があります。既にシステムにある Robot Setup レコードについては心配する必要がありません。新しく作成されるレコードに注力してください。レコードが作成された際に Robot Setup レコードを Salesforce に自動的に更新してもらうために、プロセスビルダーが再び利用できると私は信じています。

あなたのすべての協力に感謝しています！

## 補足とヒント
- たくさんの選択肢の中から値が含まれて入れば良いことを入力規則で表現するにはどうしたら良いでしょうか。素直に考えると OR 文が思いつきますが、選択肢が多いと式が長くなってしまいます。そこで、すべての選択肢を文字列結合して、その値が含まれるかで表現してみましょう。例えば、Prefecture__c という項目が東京都、埼玉県、神奈川県、茨城県、群馬県、栃木県のいずれかであることを表現するには、``CONTAINS('東京都:埼玉県:神奈川県:茨城県:群馬県:栃木県',Prefecture__c)`` と表現できます。ここで``:``は可読性のための区切り文字であり、``,``でも構いません。
- 取引先と商談は主従関係ではありませんが、積み上げ集計項目を利用することができます。
- 日付項目から曜日を取得するには、[こちらのヘルプ記事](https://help.salesforce.com/articleView?id=000271227&language=ja&type=1)が参考になります。Challenge の際は英語表記にすることをお忘れなく。
